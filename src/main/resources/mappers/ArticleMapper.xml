<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.moses.blog.mapper.ArticleMapper">

    <!--    建立sql查询结果字段与实体属性的映射关系-->
    <resultMap id="ArticleInfoMap" type="com.moses.blog.view.Article">
        <result column="a_id" property="id"/>
        <result column="a_title" property="title"/>
        <result column="a_content" property="content"/>
        <result column="a_summary" property="summary"/>
        <result column="a_cover" property="cover"/>
        <result column="a_view_count" property="viewCount"/>
        <result column="a_update_time" property="updateTime"/>
        <result column="a_status" property="status"/>
        <result column="a_type_id" property="typeId"/>
    </resultMap>

    <insert id="insert">
        insert into article(a_title, a_content, a_summary, a_cover, a_view_count, a_update_time, a_status, a_type_id)
        values (#{title}, #{content}, #{summary}, #{cover}, #{viewCount}, #{updateTime}, #{status}, #{typeId});
    </insert>

    <update id="update">
        update article
        <set>
            <if test="title!=null">a_title=#{title},</if>
            <if test="content!=null">a_content=#{content},</if>
            <if test="summary!=null">a_summary=#{summary},</if>
            <if test="cover!=null">a_cover=#{cover},</if>
            <if test="viewCount!=null">a_view_count=#{viewCount},</if>
            <if test="updateTime!=null">a_update_time=#{updateTime},</if>
            <if test="status!=null">a_status=#{status},</if>
            <if test="typeId!=null">a_type_id=#{typeId}</if>
        </set>
        where a_id = #{id};
    </update>

    <select id="list" resultMap="ArticleInfoMap">
        select *
        from article
        where a_status = 1
        order by a_update_time desc;
    </select>

    <select id="findArticleById" resultMap="ArticleInfoMap">
        select *
        from article
        where a_id = #{id};
    </select>


</mapper>


